!function(){"use strict";function n(n,e){for(var r,t=arguments,o=[],a=[],u=arguments.length;u-- >2;)a.push(t[u]);for(;a.length;)if(Array.isArray(r=a.pop()))for(var u=r.length;u--;)a.push(r[u]);else null==r||!0===r||!1===r||o.push(r);return"string"==typeof n?{name:n,props:e||{},children:o}:n(e||{},o)}function e(n,e,r,t){function o(n,e){return n&&{name:n.nodeName.toLowerCase(),props:{},children:e.call(n.childNodes,function(n){return 3===n.nodeType?n.nodeValue:o(n,e)})}}function a(o){for(b=!b,o=r(n,e),t&&!b&&(w=m(t,w,D,D=o));o=y.pop();)o()}function u(){b||(b=!b,setTimeout(a))}function i(n,e){var r={};for(var t in n)r[t]=n[t];for(var t in e)r[t]=e[t];return r}function l(n,e,r,t){return n.length?(t[n[0]]=1<n.length?l(n.slice(1),e,r[n[0]],{}):e,i(r,t)):e}function c(n,e){for(var r=0;r<n.length;r++)e=e[n[r]];return e}function s(e,r,t){for(var o in t)"function"==typeof t[o]?function(o,a){t[o]=function(o){return r=c(e,n),"function"==typeof(o=a(o))&&(o=o(r,t)),o&&o!==r&&!o.then&&u(n=l(e,i(r,o),n,{})),o}}(o,t[o]):s(e.concat(o),r[o]=r[o]||{},t[o]=i(t[o]))}function f(n){return n&&n.props?n.props.key:null}function d(n,e,r,t){if("key"===e);else if("style"===e)for(var o in i(t,r))n[e][o]=null==r||null==r[o]?"":r[o];else{try{n[e]=null==r?"":r}catch(n){}"function"!=typeof r&&(null==r||!1===r?n.removeAttribute(e):n.setAttribute(e,r))}}function p(n,e){var r="string"==typeof n||"number"==typeof n?document.createTextNode(n):(e=e||"svg"===n.name)?document.createElementNS("http://www.w3.org/2000/svg",n.name):document.createElement(n.name);if(n.props){n.props.oncreate&&y.push(function(){n.props.oncreate(r)});for(var t=0;t<n.children.length;t++)r.appendChild(p(n.children[t],e));for(var o in n.props)d(r,o,n.props[o])}return r}function g(n,e,r){for(var t in i(e,r))r[t]!==("value"===t||"checked"===t?n[t]:e[t])&&d(n,t,r[t],e[t]);r.onupdate&&y.push(function(){r.onupdate(n,e)})}function v(n,e,r){if(r=e.props){for(var t=0;t<e.children.length;t++)v(n.childNodes[t],e.children[t]);r.ondestroy&&r.ondestroy(n)}return n}function h(n,e,r,t){function o(){n.removeChild(v(e,r))}r.props&&(t=r.props.onremove)?t(e,o):o()}function m(n,e,r,t,o,a){if(t===r);else if(null==r)e=n.insertBefore(p(t,o),e);else if(t.name&&t.name===r.name){g(e,r.props,t.props);for(var u=[],i={},l={},c=0;c<r.children.length;c++){u[c]=e.childNodes[c];var s=r.children[c],d=f(s);null!=d&&(i[d]=[u[c],s])}for(var c=0,v=0;v<t.children.length;){var s=r.children[c],b=t.children[v],d=f(s),y=f(b);if(l[d])c++;else if(null==y)null==d&&(m(e,u[c],s,b,o),v++),c++;else{var w=i[y]||[];d===y?(m(e,w[0],w[1],b,o),c++):w[0]?m(e,e.insertBefore(w[0],u[c]),w[1],b,o):m(e,u[c],null,b,o),v++,l[y]=b}}for(;c<r.children.length;){var s=r.children[c];null==f(s)&&h(e,u[c],s),c++}for(var c in i)l[i[c][1].props.key]||h(e,i[c][0],i[c][1])}else t.name===r.name?e.nodeValue=t:(e=n.insertBefore(p(t,o),a=e),h(n,a,r));return e}var b,y=[],w=t&&t.children[0],D=o(w,[].map);return u(s([],n=i(n),e=i(e))),e}function r(e){var r=e.name,t=e.dragging,o=e.startDrag,a=e.value,u=e.stopDrag,i=e.limit,l=e.src,c=e.dst,s=e.over,f=e.reset,d=e.renderer,p=function(n){return function(e){e.preventDefault();var r=event.changedTouches,t=r[0],o=document.elementFromPoint(t.clientX,t.clientY);return n(o.closest(".pool"))}},g=p(function(n){return t?s(n.dataset.name):null}),v=p(function(n){return parseInt(n.dataset.value)<(n.dataset.limit||1/0)?u(n.dataset.name):f()}),h=function(){return 0!=a?o(r):f()},m=["pool","pool-"+r,r.includes("Top")?"flip":"",0==a?"empty":"",l==r&&0==a?"invalid-src":"",c==r&&a==i?"invalid-dst":""].join(" "),b=n("div",null,r,": ",a,n("br",null),"limit: ",i);return n("div",{class:m,"data-name":r,"data-limit":i,"data-value":a,onmousedown:h,onmouseup:function(n){return function(){return a<(i||1/0)?u(n):f()}}(r),onmouseover:function(){return t?s(r):null},ontouchstart:h,ontouchend:v,ontouchmove:g},d?d({value:a}):b)}function t(n,e){return function(r,t,o,a){function u(e,r){var t=r?r+".":"";return Object.keys(e||{}).reduce(function(r,o){var a=t+o,i=e[o];return r[o]="function"==typeof i?function(e){return function(r,t){var o=i(e);return o="function"==typeof o?o(r,t):o,n(r,{name:a,data:e},o),o}}:u(i,a),r},{})}var i=u(t);return e(r,i,o,a)}}"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("service-worker-5739e48f16.js").then(function(n){n.onupdatefound=function(){var e=n.installing;e.onstatechange=function(){switch(e.state){case"installed":navigator.serviceWorker.controller}}}}).catch(function(n){})});var o={board:{startDrag:function(n){return function(){return{src:n,dragging:!0}}},over:function(n){return function(e){var r=e.dragging,t=e.src;return{dst:r&&n!=t?n:null}}},reset:function(){return function(){return{src:null,dst:null,dragging:!1}}}},stopDrag:function(n){return function(e){var r=e.board.src,t=e.ledger;return n==r||null==r||null==n?{board:o.board.reset()()}:{board:o.board.reset()(),ledger:t.concat([[r,n]])}}}},a={pools:{distance:10,shadow:0,lifeTop:8,lifeBottom:8,auraTop:3,auraBottom:3,flareTop:0,flareBottom:0},board:{dragging:!1,src:null,dst:null},ledger:[]},u=function(e){var r=e.value;return n("div",{class:"distance"},new Array(10).fill().map(function(e,t){var o=(10-r)/2;return n("div",{class:["step",t+1<=r+o&&t+1>o?"fill":"","step"+t].join(" "),key:t+1})}))},i=function(e,t){var o=e.ledger,a=e.board,i=e.pools,l=o.reduce(function(n,e){var r,t=e[0],o=e[1];return Object.assign({},n,(r={},r[t]=n[t]-1,r[o]=n[o]+1,r))},i);return n("div",{class:"board "+(a.dragging?"dragging":"")},n("button",{onclick:t.clear},"clear"),n(r,Object.assign({},{name:"auraTop",limit:5,value:l.auraTop},a,{stopDrag:t.stopDrag},t.board)),n(r,Object.assign({},{name:"shadow",value:l.shadow},a,{stopDrag:t.stopDrag},t.board)),n(r,Object.assign({},{name:"distance",limit:10,value:l.distance},a,{stopDrag:t.stopDrag},t.board,{renderer:u})),n("h1",null,a.dragging?"Dragging":""))},l=function(n,e,r){},c=function(n){return"function"==typeof n};!function(n){return function(e,r,t,o){e.ledger=JSON.parse(sessionStorage.getItem("ledger"))||e.ledger;var a=Object.assign({},r,{stopDrag:function(n){return function(e){var t=r.stopDrag(n)(e);return sessionStorage.setItem("ledger",JSON.stringify(Object.assign({},e,t).ledger)),t}},clear:function(){return function(){return sessionStorage.setItem("ledger",null)}}});return n.call(null,e,a,t,o)}}(function(n){if(c(n))return t(l,n);var e=c(n.log)?n.log:l;return function(n){return t(e,n)}}(e))(a,o,i,document.body)}();